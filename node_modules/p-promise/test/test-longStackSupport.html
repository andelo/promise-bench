<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>P.longStackSupport</title>
</head>
<body>
  <script src="../p.js"></script>
  <script>
Error.stackTraceLimit = 25;
P.longStackSupport = true;

P()
.then(function outer() {
    return P().then(function inner() {
        return P().then(function evenMoreInner() {
            //a.b.c.d();
            return {then: function( cb, eb ) {
              cb({then: function( cb, eb ) {
                eb( new Error("shit") );
              }});
            }};
        });
    })
})
.fail(function( e ) {
  console.error( e.stack );
});
  </script>
</body>
</html>
